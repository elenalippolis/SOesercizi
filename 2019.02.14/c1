/*Definiamo col nome di semaforo monobinario un semaforo che può assumere solamente i valori zero e
uno. Come un semaforo binario ordinario una operazione monoP quando il semaforo ha valore zero deve bloccare il
processo chiamante, altrimenti porta il valore del semaforo da 1 a 0. Quando il valore del semaforo è zero, una
operazione monoV sblocca il primo processo bloccato, se ve ne sono, altrimenti porta il valore da 0 a 1. Una operazione
monoV su un semaforo monobinario che ha valore 1 non produce alcun effetto. Scrivere il monitor monobinarysem
che implementi i metodi monoP e monoV */


monitor monobinarysem{
  condition ok2go;
  int count=0;
  int value = 1;
  
  //quando il sem ha val 0 deve bloccare il proc
  //altrimenti porta il val da 1 a 0
  procedure entry monoP(){
    if(value==0){
      count ++;
      ok2go.wait();
    }
    val = 0;
  }

  //quando il sem è a 0, monoV sblocca il primo proc bloccato se ci sono
  //altrimento porta il val da 0 a 1
  procedure entry monoV(){
    if(value == 0 && count >=1){
      ok2go.signal();
    }
    val = 1;
  }
}
